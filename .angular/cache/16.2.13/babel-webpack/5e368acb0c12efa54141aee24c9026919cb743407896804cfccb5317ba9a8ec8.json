{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Course } from 'src/app/course';\nexport let HomefrontComponent = class HomefrontComponent {\n  constructor(moduleService, courseService) {\n    this.moduleService = moduleService;\n    this.courseService = courseService;\n    this.modules = [];\n    this.course = new Course();\n    this.showPopup = false;\n    this.selectedModule = null;\n    this.currentPage = 1;\n    this.pageSize = 3;\n    this.showAddCoursePopup = false;\n  }\n  ngOnInit() {\n    this.moduleService.getModulesList().subscribe(data => {\n      this.modules = data;\n    });\n  }\n  openAddCoursePopup() {\n    this.showAddCoursePopup = true;\n  }\n  closeAddCoursePopup() {\n    this.showAddCoursePopup = false;\n  }\n  showCoursesPopup(event, module) {\n    event.preventDefault();\n    this.selectedModule = module;\n    this.showPopup = true;\n  }\n  closePopup() {\n    this.showPopup = false;\n  }\n  getFileUrl(attachmentFileName) {\n    return `http://localhost:8081/course/files/${attachmentFileName}`;\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  saveCourse() {\n    const formData = new FormData();\n    formData.append('file', this.selectedFile);\n    formData.append('course', JSON.stringify(this.course));\n    this.courseService.createCourse(formData).subscribe(data => {\n      console.log(data);\n    }, error => console.log(error));\n  }\n  onSubmit() {\n    console.log(this.course);\n    this.saveCourse();\n  }\n  previewFile(fileUrl) {\n    fetch(fileUrl).then(response => response.blob()).then(blob => {\n      const blobUrl = URL.createObjectURL(blob);\n      window.open(blobUrl, '_blank');\n    }).catch(error => {\n      console.error('Error fetching file:', error);\n    });\n  }\n};\nHomefrontComponent = __decorate([Component({\n  selector: 'app-homefront',\n  templateUrl: './homefront.component.html'\n})], HomefrontComponent);","map":{"version":3,"names":["Component","Course","HomefrontComponent","constructor","moduleService","courseService","modules","course","showPopup","selectedModule","currentPage","pageSize","showAddCoursePopup","ngOnInit","getModulesList","subscribe","data","openAddCoursePopup","closeAddCoursePopup","showCoursesPopup","event","module","preventDefault","closePopup","getFileUrl","attachmentFileName","onFileSelected","selectedFile","target","files","saveCourse","formData","FormData","append","JSON","stringify","createCourse","console","log","error","onSubmit","previewFile","fileUrl","fetch","then","response","blob","blobUrl","URL","createObjectURL","window","open","catch","__decorate","selector","templateUrl"],"sources":["C:\\Users\\Administrator\\Desktop\\Angular\\angular-frontend\\src\\app\\frontoffice\\homefront\\homefront.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Course } from 'src/app/course';\nimport { CourseService } from 'src/app/course.service';\nimport { Module } from 'src/app/module';\nimport { ModuleService } from 'src/app/module.service';\n\n@Component({\n  selector: 'app-homefront',\n  templateUrl: './homefront.component.html',\n})\nexport class HomefrontComponent {\n  modules: Module[] = [];\n  course: Course = new Course();\n  showPopup: boolean = false;\n  selectedModule: Module | null = null;\n  currentPage: number = 1;\n  pageSize: number = 3; \n  showAddCoursePopup: boolean = false;\n  selectedFile: File | undefined;\n\n  constructor(private moduleService: ModuleService,\n    private courseService: CourseService) {}\n\n  ngOnInit(): void {\n    this.moduleService.getModulesList().subscribe((data: Module[]) => {\n      this.modules = data;\n    });\n  }\n\n  openAddCoursePopup(): void {\n    this.showAddCoursePopup = true;\n  }\n\n  closeAddCoursePopup(): void {\n    this.showAddCoursePopup = false;\n  }\n\n  showCoursesPopup(event: MouseEvent, module: Module): void {\n    event.preventDefault();\n    this.selectedModule = module;\n    this.showPopup = true;\n  }\n\n  closePopup(): void {\n    this.showPopup = false;\n  }\n\n  getFileUrl(attachmentFileName: string): string {\n    return `http://localhost:8081/course/files/${attachmentFileName}`;\n  }\n\n  onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0];\n  }\n\n  saveCourse() {\n    const formData = new FormData();\n    formData.append('file', this.selectedFile as Blob); \n    formData.append('course', JSON.stringify(this.course));\n\n    this.courseService.createCourse(formData).subscribe(data => {\n        console.log(data);\n      },\n      error => console.log(error));\n  }\n\n  onSubmit() {\n    console.log(this.course);\n    this.saveCourse();\n  }\n\n  previewFile(fileUrl: string) {\n    fetch(fileUrl)\n      .then(response => response.blob())\n      .then(blob => {\n        const blobUrl = URL.createObjectURL(blob);\n        window.open(blobUrl, '_blank');\n      })\n      .catch(error => {\n        console.error('Error fetching file:', error);\n      });\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,MAAM,QAAQ,gBAAgB;AAShC,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAU7BC,YAAoBC,aAA4B,EACtCC,aAA4B;IADlB,KAAAD,aAAa,GAAbA,aAAa;IACvB,KAAAC,aAAa,GAAbA,aAAa;IAVvB,KAAAC,OAAO,GAAa,EAAE;IACtB,KAAAC,MAAM,GAAW,IAAIN,MAAM,EAAE;IAC7B,KAAAO,SAAS,GAAY,KAAK;IAC1B,KAAAC,cAAc,GAAkB,IAAI;IACpC,KAAAC,WAAW,GAAW,CAAC;IACvB,KAAAC,QAAQ,GAAW,CAAC;IACpB,KAAAC,kBAAkB,GAAY,KAAK;EAIM;EAEzCC,QAAQA,CAAA;IACN,IAAI,CAACT,aAAa,CAACU,cAAc,EAAE,CAACC,SAAS,CAAEC,IAAc,IAAI;MAC/D,IAAI,CAACV,OAAO,GAAGU,IAAI;IACrB,CAAC,CAAC;EACJ;EAEAC,kBAAkBA,CAAA;IAChB,IAAI,CAACL,kBAAkB,GAAG,IAAI;EAChC;EAEAM,mBAAmBA,CAAA;IACjB,IAAI,CAACN,kBAAkB,GAAG,KAAK;EACjC;EAEAO,gBAAgBA,CAACC,KAAiB,EAAEC,MAAc;IAChDD,KAAK,CAACE,cAAc,EAAE;IACtB,IAAI,CAACb,cAAc,GAAGY,MAAM;IAC5B,IAAI,CAACb,SAAS,GAAG,IAAI;EACvB;EAEAe,UAAUA,CAAA;IACR,IAAI,CAACf,SAAS,GAAG,KAAK;EACxB;EAEAgB,UAAUA,CAACC,kBAA0B;IACnC,OAAO,sCAAsCA,kBAAkB,EAAE;EACnE;EAEAC,cAAcA,CAACN,KAAU;IACvB,IAAI,CAACO,YAAY,GAAGP,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;EAC3C;EAEAC,UAAUA,CAAA;IACR,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE,IAAI,CAACN,YAAoB,CAAC;IAClDI,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC5B,MAAM,CAAC,CAAC;IAEtD,IAAI,CAACF,aAAa,CAAC+B,YAAY,CAACL,QAAQ,CAAC,CAAChB,SAAS,CAACC,IAAI,IAAG;MACvDqB,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC;IACnB,CAAC,EACDuB,KAAK,IAAIF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC,CAAC;EAChC;EAEAC,QAAQA,CAAA;IACNH,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC/B,MAAM,CAAC;IACxB,IAAI,CAACuB,UAAU,EAAE;EACnB;EAEAW,WAAWA,CAACC,OAAe;IACzBC,KAAK,CAACD,OAAO,CAAC,CACXE,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACE,IAAI,IAAG;MACX,MAAMC,OAAO,GAAGC,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC;MACzCI,MAAM,CAACC,IAAI,CAACJ,OAAO,EAAE,QAAQ,CAAC;IAChC,CAAC,CAAC,CACDK,KAAK,CAACb,KAAK,IAAG;MACbF,OAAO,CAACE,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C,CAAC,CAAC;EACN;CACD;AAxEYrC,kBAAkB,GAAAmD,UAAA,EAJ9BrD,SAAS,CAAC;EACTsD,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE;CACd,CAAC,C,EACWrD,kBAAkB,CAwE9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}